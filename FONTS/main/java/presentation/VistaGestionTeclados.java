package presentation;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;
import java.util.*;

/**
 *
 * @author jianingxu
 */
public class VistaGestionTeclados extends javax.swing.JFrame {
    private CtrlPresentacion iCtrlPresentacion;
    private boolean userSelection = true;
    
    /**
     * Creates new form VistaGestionTeclados
     */
    public VistaGestionTeclados(CtrlPresentacion pCtrlPresentacion) {
        iCtrlPresentacion = pCtrlPresentacion;
        initComponents();
        inicializar_frameVista();
        resetCardCrearTeclado();
        mostrarCardCrearTeclado();
    }
    
    public void hacerVisible() {
        pack();
        setVisible(true);
        resetCardCrearTeclado();
        mostrarCardCrearTeclado();
    }

    public void hacerInvisible() {
        setVisible(false);
    }

    public void activar() {
        setEnabled(true);
    }

    public void desactivar() {
        setEnabled(false);
    }
    
    private void inicializar_frameVista() {
        setResizable(false);

        // Posicion y operaciones por defecto
        setLocationRelativeTo(null);
        setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE);

        // Add WindowListener to the frame
        addWindowListener(new WindowAdapter() {
            @Override
            public void windowClosing(WindowEvent e) {
                try {
                    performOperationBeforeExit();
                } catch (Exception ex) {
                    throw new RuntimeException(ex);
                }
            }
        });
    }

    private void performOperationBeforeExit() throws Exception {
        int result = JOptionPane.showConfirmDialog(this, "Seguro que quieres salir?", "Confirmation",
                JOptionPane.YES_NO_OPTION);
        if (result == JOptionPane.YES_OPTION) {
            try {
                iCtrlPresentacion.guardarDatos();
            } catch (Exception e) {
                JOptionPane.showMessageDialog(this, e.getMessage());
            }
            dispose(); // Close the frame
            iCtrlPresentacion.cerrarPrograma();
        }
    }
    
    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jLabel2 = new javax.swing.JLabel();
        panelCard = new javax.swing.JPanel();
        panelCrear = new javax.swing.JPanel();
        labelNombreTeclado = new javax.swing.JLabel();
        fieldNombreTeclado = new javax.swing.JTextField();
        labelAlfabeto = new javax.swing.JLabel();
        comboboxAlfabeto = new javax.swing.JComboBox<>();
        labelTexto = new javax.swing.JLabel();
        labelPalabrasConFrecuencia = new javax.swing.JLabel();
        jScrollPane1 = new javax.swing.JScrollPane();
        areaPalabrasConFrecuencia = new javax.swing.JTextArea();
        jScrollPane2 = new javax.swing.JScrollPane();
        areaTexto = new javax.swing.JTextArea();
        btnCrearTeclado = new javax.swing.JButton();
        labelAlgoritmo = new javax.swing.JLabel();
        comboboxAlgoritmo = new javax.swing.JComboBox<>();
        labelTituloCrear = new javax.swing.JLabel();
        labelEjemploTexto = new javax.swing.JLabel();
        labelEjemploLista = new javax.swing.JLabel();
        panelModificar = new javax.swing.JPanel();
        panelContainerTeclas = new javax.swing.JPanel();
        panelTeclas = new javax.swing.JPanel();
        jPanel1 = new javax.swing.JPanel();
        comboboxTeclado = new javax.swing.JComboBox<>();
        labelTituloModificar = new javax.swing.JLabel();
        labelTeclado = new javax.swing.JLabel();
        jPanel3 = new javax.swing.JPanel();
        jPanel2 = new javax.swing.JPanel();
        btnIntercambiarTeclas = new javax.swing.JButton();
        btnEliminarTeclado = new javax.swing.JButton();
        fieldCaracter2 = new javax.swing.JTextField();
        labelCaracter2 = new javax.swing.JLabel();
        labelCaracter1 = new javax.swing.JLabel();
        fieldCaracter1 = new javax.swing.JTextField();
        menubarAcciones = new javax.swing.JMenuBar();
        menuVolver = new javax.swing.JMenu();
        menuCrear = new javax.swing.JMenu();
        menuModificar = new javax.swing.JMenu();

        jLabel2.setText("Intercambiar teclas:");

        setDefaultCloseOperation(javax.swing.WindowConstants.DO_NOTHING_ON_CLOSE);
        setTitle("KeyboardCraft - Gestión de teclados");
        setMinimumSize(new java.awt.Dimension(500, 400));

        panelCard.setLayout(new java.awt.CardLayout());

        labelNombreTeclado.setText("Nombre del teclado:");

        fieldNombreTeclado.setColumns(10);

        labelAlfabeto.setText("Alfabeto a utilizar:");

        comboboxAlfabeto.setMaximumRowCount(10);

        labelTexto.setText("Texto:");

        labelPalabrasConFrecuencia.setText("Lista de palabras con frecuencia:");

        areaPalabrasConFrecuencia.setColumns(20);
        areaPalabrasConFrecuencia.setRows(5);
        jScrollPane1.setViewportView(areaPalabrasConFrecuencia);

        areaTexto.setColumns(20);
        areaTexto.setRows(5);
        jScrollPane2.setViewportView(areaTexto);

        btnCrearTeclado.setText("Crear teclado");
        btnCrearTeclado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCrearTecladoActionPerformed(evt);
            }
        });

        labelAlgoritmo.setText("Algoritmo a utilizar:");

        comboboxAlgoritmo.setMaximumRowCount(10);

        labelTituloCrear.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        labelTituloCrear.setText("Creación de teclado");

        labelEjemploTexto.setForeground(new java.awt.Color(100, 100, 100));
        labelEjemploTexto.setText("Ejemplo: \"erase una vez ...\"");

        labelEjemploLista.setForeground(new java.awt.Color(100, 100, 100));
        labelEjemploLista.setText("Ejemplo: \"mesa 15 cama 100 reloj 3 ...\"");

        javax.swing.GroupLayout panelCrearLayout = new javax.swing.GroupLayout(panelCrear);
        panelCrear.setLayout(panelCrearLayout);
        panelCrearLayout.setHorizontalGroup(
            panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelCrearLayout.createSequentialGroup()
                .addGap(205, 205, 205)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                        .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                            .addComponent(jScrollPane2, javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(jScrollPane1))
                        .addGap(213, 213, 213))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                        .addGap(0, 0, Short.MAX_VALUE)
                        .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                                .addComponent(btnCrearTeclado)
                                .addGap(283, 283, 283))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                                .addComponent(labelTituloCrear)
                                .addGap(267, 267, 267))
                            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                                    .addGroup(panelCrearLayout.createSequentialGroup()
                                        .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(labelNombreTeclado)
                                            .addComponent(labelAlfabeto))
                                        .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                                            .addGroup(panelCrearLayout.createSequentialGroup()
                                                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                                .addComponent(fieldNombreTeclado))
                                            .addGroup(panelCrearLayout.createSequentialGroup()
                                                .addGap(11, 11, 11)
                                                .addComponent(comboboxAlfabeto, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE))))
                                    .addGroup(panelCrearLayout.createSequentialGroup()
                                        .addComponent(labelAlgoritmo)
                                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                                        .addComponent(comboboxAlgoritmo, javax.swing.GroupLayout.PREFERRED_SIZE, 131, javax.swing.GroupLayout.PREFERRED_SIZE)))
                                .addGap(212, 212, 212))))
                    .addGroup(panelCrearLayout.createSequentialGroup()
                        .addGap(46, 46, 46)
                        .addComponent(labelTexto)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(labelEjemploTexto)
                        .addContainerGap())))
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelCrearLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(labelPalabrasConFrecuencia)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(labelEjemploLista)
                .addGap(105, 105, 105))
        );
        panelCrearLayout.setVerticalGroup(
            panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelCrearLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(labelTituloCrear)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelNombreTeclado)
                    .addComponent(fieldNombreTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelAlfabeto)
                    .addComponent(comboboxAlfabeto, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelAlgoritmo)
                    .addComponent(comboboxAlgoritmo, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelTexto)
                    .addComponent(labelEjemploTexto, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane2, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(panelCrearLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelPalabrasConFrecuencia)
                    .addComponent(labelEjemploLista, javax.swing.GroupLayout.PREFERRED_SIZE, 24, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 63, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(btnCrearTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, 41, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(12, 12, 12))
        );

        panelCard.add(panelCrear, "cardCrear");

        panelTeclas.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        panelTeclas.setPreferredSize(new java.awt.Dimension(320, 150));
        panelTeclas.setLayout(new java.awt.GridLayout());

        javax.swing.GroupLayout panelContainerTeclasLayout = new javax.swing.GroupLayout(panelContainerTeclas);
        panelContainerTeclas.setLayout(panelContainerTeclasLayout);
        panelContainerTeclasLayout.setHorizontalGroup(
            panelContainerTeclasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelContainerTeclasLayout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addComponent(panelTeclas, javax.swing.GroupLayout.PREFERRED_SIZE, 330, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(154, 154, 154))
        );
        panelContainerTeclasLayout.setVerticalGroup(
            panelContainerTeclasLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, panelContainerTeclasLayout.createSequentialGroup()
                .addComponent(panelTeclas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(0, 0, Short.MAX_VALUE))
        );

        comboboxTeclado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                comboboxTecladoActionPerformed(evt);
            }
        });

        labelTituloModificar.setFont(new java.awt.Font("Lucida Grande", 0, 16)); // NOI18N
        labelTituloModificar.setText("Modificación de teclado");

        labelTeclado.setText("Teclado:");

        javax.swing.GroupLayout jPanel3Layout = new javax.swing.GroupLayout(jPanel3);
        jPanel3.setLayout(jPanel3Layout);
        jPanel3Layout.setHorizontalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 98, Short.MAX_VALUE)
        );
        jPanel3Layout.setVerticalGroup(
            jPanel3Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 55, Short.MAX_VALUE)
        );

        javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
        jPanel1.setLayout(jPanel1Layout);
        jPanel1Layout.setHorizontalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(labelTituloModificar)
                        .addGap(26, 26, 26))
                    .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                        .addComponent(labelTeclado)
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addComponent(comboboxTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, 149, javax.swing.GroupLayout.PREFERRED_SIZE)
                        .addGap(18, 18, 18)))
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(110, 110, 110))
        );
        jPanel1Layout.setVerticalGroup(
            jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel1Layout.createSequentialGroup()
                .addContainerGap()
                .addComponent(jPanel3, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addGap(45, 45, 45))
            .addGroup(jPanel1Layout.createSequentialGroup()
                .addGap(21, 21, 21)
                .addComponent(labelTituloModificar)
                .addGap(18, 18, 18)
                .addGroup(jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelTeclado)
                    .addComponent(comboboxTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap())
        );

        btnIntercambiarTeclas.setText("Intercambiar posicion");
        btnIntercambiarTeclas.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnIntercambiarTeclasActionPerformed(evt);
            }
        });

        btnEliminarTeclado.setText("Eliminar teclado");
        btnEliminarTeclado.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnEliminarTecladoActionPerformed(evt);
            }
        });

        fieldCaracter2.setColumns(2);

        labelCaracter2.setText("Caracter 2:");

        labelCaracter1.setText("Caracter 1:");

        fieldCaracter1.setColumns(2);

        javax.swing.GroupLayout jPanel2Layout = new javax.swing.GroupLayout(jPanel2);
        jPanel2.setLayout(jPanel2Layout);
        jPanel2Layout.setHorizontalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, jPanel2Layout.createSequentialGroup()
                .addContainerGap(167, Short.MAX_VALUE)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.TRAILING)
                    .addComponent(btnIntercambiarTeclas)
                    .addGroup(javax.swing.GroupLayout.Alignment.LEADING, jPanel2Layout.createSequentialGroup()
                        .addGap(34, 34, 34)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(labelCaracter2, javax.swing.GroupLayout.PREFERRED_SIZE, 68, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(labelCaracter1, javax.swing.GroupLayout.Alignment.TRAILING))
                        .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                        .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
                            .addComponent(fieldCaracter2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(fieldCaracter1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))))
                .addGap(39, 39, 39)
                .addComponent(btnEliminarTeclado)
                .addGap(154, 154, 154))
        );
        jPanel2Layout.setVerticalGroup(
            jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(jPanel2Layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(fieldCaracter1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(labelCaracter1))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(labelCaracter2)
                    .addComponent(fieldCaracter2, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(jPanel2Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.BASELINE)
                    .addComponent(btnIntercambiarTeclas, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE)
                    .addComponent(btnEliminarTeclado, javax.swing.GroupLayout.PREFERRED_SIZE, 51, javax.swing.GroupLayout.PREFERRED_SIZE))
                .addContainerGap(11, Short.MAX_VALUE))
        );

        javax.swing.GroupLayout panelModificarLayout = new javax.swing.GroupLayout(panelModificar);
        panelModificar.setLayout(panelModificarLayout);
        panelModificarLayout.setHorizontalGroup(
            panelModificarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(panelModificarLayout.createSequentialGroup()
                .addContainerGap()
                .addComponent(panelContainerTeclas, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                .addContainerGap())
        );
        panelModificarLayout.setVerticalGroup(
            panelModificarLayout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(panelModificarLayout.createSequentialGroup()
                .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, 94, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(panelContainerTeclas, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jPanel2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
        );

        panelCard.add(panelModificar, "cardModificar");
        panelModificar.getAccessibleContext().setAccessibleName("");
        panelModificar.getAccessibleContext().setAccessibleDescription("");

        menuVolver.setText("<- Ir a menú principal");
        menuVolver.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuVolverMouseClicked(evt);
            }
        });
        menubarAcciones.add(menuVolver);

        menuCrear.setText("Crear teclado");
        menuCrear.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuCrearMouseClicked(evt);
            }
        });
        menubarAcciones.add(menuCrear);

        menuModificar.setText("Modificar teclado");
        menuModificar.addMouseListener(new java.awt.event.MouseAdapter() {
            public void mouseClicked(java.awt.event.MouseEvent evt) {
                menuModificarMouseClicked(evt);
            }
        });
        menubarAcciones.add(menuModificar);

        setJMenuBar(menubarAcciones);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelCard, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(panelCard, javax.swing.GroupLayout.Alignment.TRAILING, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );

        pack();
    }// </editor-fold>   


    private void btnEliminarTecladoActionPerformed(java.awt.event.ActionEvent evt) {                                                   
        String nombreTeclado = (String) comboboxTeclado.getSelectedItem();
        try {
            iCtrlPresentacion.eliminarTeclado(nombreTeclado);
            actualizarNombreTecladosComboBox();
            panelTeclas.removeAll();
            fieldCaracter1.setText("");
            fieldCaracter2.setText("");
            JOptionPane.showMessageDialog(this, "¡Se ha eliminado el teclado " + nombreTeclado + " con éxito!");
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage());
        }
    }                                                  

    private void btnIntercambiarTeclasActionPerformed(java.awt.event.ActionEvent evt) {                                                      
        // TODO add your handling code here:
    }                                                     

    private void btnCrearTecladoActionPerformed(java.awt.event.ActionEvent evt) {                                                
        String nombreTeclado = fieldNombreTeclado.getText();
        String nombreAlfabeto = (String) comboboxAlfabeto.getSelectedItem();
        String nombreAlgoritmo = (String) comboboxAlgoritmo.getSelectedItem();
        String texto = areaTexto.getText();
        String palabrasConFrecuencia = areaPalabrasConFrecuencia.getText();
        try {
            iCtrlPresentacion.crearTeclado(nombreTeclado, nombreAlfabeto, texto, palabrasConFrecuencia, nombreAlgoritmo);
            resetCardCrearTeclado();
            JOptionPane.showMessageDialog(this, "¡Se ha creado el teclado " + nombreTeclado + " con éxito!");
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage());
        }
    }                                               

    private void menuModificarMouseClicked(java.awt.event.MouseEvent evt) {                                           
        resetCardModificarTeclado();
        mostrarCardModificarTeclado();
    }                                          

    private void menuCrearMouseClicked(java.awt.event.MouseEvent evt) {                                       
        resetCardCrearTeclado();
        mostrarCardCrearTeclado();
    }                                      

    private void menuVolverMouseClicked(java.awt.event.MouseEvent evt) {                                        
        iCtrlPresentacion.syncVistaGestionTeclados_a_MenuPrincipal();
    }                                       

    private void comboboxTecladoActionPerformed(java.awt.event.ActionEvent evt) {                                                
        if (!userSelection) return;
        String nombreTeclado = (String) comboboxTeclado.getSelectedItem();
        try {
            Character[][] distribucion = iCtrlPresentacion.getDistribucionTeclado(nombreTeclado);
            int rows = distribucion.length;
            // Quitar las teclas del teclado anterior del panel
            panelTeclas.removeAll();
            // Poner las teclas del teclado actual en el panel como botones
            panelTeclas.setLayout(new GridLayout(rows, distribucion[0].length));
            for (int i = 0; i < rows; ++i) {
                int cols = distribucion[i].length;
                for (int j = 0; j < cols; ++j) {
                    JButton button = new JButton();
                    if (distribucion[i][j] == null) button.setText(" ");
                    else button.setText(distribucion[i][j].toString());
            
                    // Tamano del button
                    Dimension buttonSize = button.getPreferredSize();
                    buttonSize.width = 30;
                    buttonSize.height = 30;
                    button.setPreferredSize(buttonSize);
                    button.setMaximumSize(buttonSize);
                    button.setMargin(new Insets(5, 5, 5, 5));
                    button.addActionListener(new ActionListener() {
                        @Override
                        public void actionPerformed(ActionEvent e) {
                            if (fieldCaracter1.getText().isEmpty()) {
                                fieldCaracter1.setText(button.getText());
                            } else if (fieldCaracter2.getText().isEmpty()) {
                                fieldCaracter2.setText(button.getText());
                            } else {
                                fieldCaracter1.setText(button.getText());
                                fieldCaracter2.setText("");
                            }
                        }
                    });
                    panelTeclas.add(button);
                }
            }
            panelTeclas.revalidate();
            panelTeclas.repaint();
            fieldCaracter1.setText("");
            fieldCaracter2.setText("");
        } catch (Exception e) {
            JOptionPane.showMessageDialog(this, e.getMessage());
        }
    }                                               

    private void mostrarCardCrearTeclado() {
        CardLayout cardLayout = (CardLayout)(panelCard.getLayout());
        cardLayout.show(panelCard, "cardCrear");
    }
    
    private void mostrarCardModificarTeclado() {
        CardLayout cardLayout = (CardLayout)(panelCard.getLayout());
        cardLayout.show(panelCard, "cardModificar");
    }
    
    private void actualizarNombreAlfabetosComboBox() {
        comboboxAlfabeto.removeAllItems();
        ArrayList<String> nombreAlfabetos = iCtrlPresentacion.getNombreAlfabetos();
        for (String nombreAlfabeto : nombreAlfabetos) {
            comboboxAlfabeto.addItem(nombreAlfabeto);
        }
        comboboxAlfabeto.setSelectedIndex(-1);
    }
    
    private void actualizarNombreTecladosComboBox() {
        userSelection = false;
        comboboxTeclado.removeAllItems();
        ArrayList<String> nombreTeclados = iCtrlPresentacion.getNombreTeclados();
        for (String nombreTeclado : nombreTeclados) {
            comboboxTeclado.addItem(nombreTeclado);
        }
        comboboxTeclado.setSelectedIndex(-1);
        userSelection = true;
    }
    
    private void actualizarNombreAlgoritmosComboBox() {
        comboboxAlgoritmo.removeAllItems();
        ArrayList<String> nombreAlgoritmos = iCtrlPresentacion.getNombreAlgoritmos();
        for (String nombreAlgoritmo : nombreAlgoritmos) {
            comboboxAlgoritmo.addItem(nombreAlgoritmo);
        }
        comboboxAlgoritmo.setSelectedIndex(-1);
    }
    
    private void resetCardCrearTeclado() {
        actualizarNombreAlfabetosComboBox();
        actualizarNombreAlgoritmosComboBox();
        fieldNombreTeclado.setText("");
        areaTexto.setText("");
        areaPalabrasConFrecuencia.setText("");
    }

    private void resetCardModificarTeclado() {
        actualizarNombreTecladosComboBox();
        fieldCaracter1.setText("");
        fieldCaracter2.setText("");
    }

    // Variables declaration - do not modify                     
    private javax.swing.JTextArea areaPalabrasConFrecuencia;
    private javax.swing.JTextArea areaTexto;
    private javax.swing.JButton btnCrearTeclado;
    private javax.swing.JButton btnEliminarTeclado;
    private javax.swing.JButton btnIntercambiarTeclas;
    private javax.swing.JComboBox<String> comboboxAlfabeto;
    private javax.swing.JComboBox<String> comboboxAlgoritmo;
    private javax.swing.JComboBox<String> comboboxTeclado;
    private javax.swing.JTextField fieldCaracter1;
    private javax.swing.JTextField fieldCaracter2;
    private javax.swing.JTextField fieldNombreTeclado;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JPanel jPanel1;
    private javax.swing.JPanel jPanel2;
    private javax.swing.JPanel jPanel3;
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JScrollPane jScrollPane2;
    private javax.swing.JLabel labelAlfabeto;
    private javax.swing.JLabel labelAlgoritmo;
    private javax.swing.JLabel labelCaracter1;
    private javax.swing.JLabel labelCaracter2;
    private javax.swing.JLabel labelEjemploLista;
    private javax.swing.JLabel labelEjemploTexto;
    private javax.swing.JLabel labelNombreTeclado;
    private javax.swing.JLabel labelPalabrasConFrecuencia;
    private javax.swing.JLabel labelTeclado;
    private javax.swing.JLabel labelTexto;
    private javax.swing.JLabel labelTituloCrear;
    private javax.swing.JLabel labelTituloModificar;
    private javax.swing.JMenu menuCrear;
    private javax.swing.JMenu menuModificar;
    private javax.swing.JMenu menuVolver;
    private javax.swing.JMenuBar menubarAcciones;
    private javax.swing.JPanel panelCard;
    private javax.swing.JPanel panelContainerTeclas;
    private javax.swing.JPanel panelCrear;
    private javax.swing.JPanel panelModificar;
    private javax.swing.JPanel panelTeclas;
    // End of variables declaration         
}
